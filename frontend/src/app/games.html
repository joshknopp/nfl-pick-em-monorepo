<div class="container">
  <div class="week-nav text-center mb-3">
    <button
      class="btn btn-secondary mr-2"
      (click)="goToPreviousWeek()"
      [disabled]="selectedWeek <= minWeek"
    >
      Previous
    </button>
    <span class="current-week-label">Week {{ selectedWeek }}</span>
    <button
      class="btn btn-secondary ml-2"
      (click)="goToNextWeek()"
      [disabled]="selectedWeek >= maxWeek"
    >
      Next
    </button>
  </div>

  <div *ngIf="filteredGames.length === 0" class="text-center">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p class="text-muted mt-3">Loading games...</p>
    </div>
  </div>

  <div class="grid grid-auto" *ngIf="filteredGames.length > 0">
    <div
      class="card game-card"
      [ngClass]="{
        'pick-correct': getPickResult(game) === 'correct',
        'pick-incorrect': getPickResult(game) === 'incorrect'
      }"
      *ngFor="let game of filteredGames; trackBy: trackGame"
    >
      <div class="card-content">
        <div class="saving-overlay" *ngIf="isSaving.get(getGameId(game))">
          <div class="spinner"></div>
        </div>
        <!-- Game Info Header -->
        <div class="game-header">
          <div class="game-time">
            <span class="text-xs text-light"
              >{{ game.kickoffTime | date:'E, MMM d' }}, {{ game.kickoffTime |
              date:'h:mm a' }}</span
            >
          </div>
        </div>
        <!-- Pick Radio Buttons -->
        <div>
          <div class="radio-group">
            <div class="radio-button">
              <input
                type="radio"
                [id]="'away-' + getGameId(game)"
                [name]="'game-' + getGameId(game)"
                [value]="game.awayTeam"
                [checked]="getSelectedPick(game) === game.awayTeam"
                (change)="onPickChange(game, game.awayTeam)"
                [disabled]="isSaving.get(getGameId(game)) || isGameLocked(game)"
              />
              <label [for]="'away-' + getGameId(game)"
                >{{ game.awayTeam }}</label
              >
            </div>
            <div class="vs-divider">
              <span class="vs-text">&#64;</span>
            </div>
            <div class="radio-button">
              <input
                type="radio"
                [id]="'home-' + getGameId(game)"
                [name]="'game-' + getGameId(game)"
                [value]="game.homeTeam"
                [checked]="getSelectedPick(game) === game.homeTeam"
                (change)="onPickChange(game, game.homeTeam)"
                [disabled]="isSaving.get(getGameId(game)) || isGameLocked(game)"
              />
              <label [for]="'home-' + getGameId(game)"
                >{{ game.homeTeam }}</label
              >
            </div>
          </div>
        </div>
        <!-- Game Status -->
        <div class="game-status" *ngIf="game.winner">
          <div class="status-badge winner">
            <span class="status-text">Winner: {{ game.winner }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
